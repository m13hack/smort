# add loopback aliases
sudo ip addr add 127.0.0.2/8 dev lo
sudo ip addr add 127.0.0.3/8 dev lo
ip -4 addr show dev lo
# start Snort on loopback
sudo snort -A console -q -c /etc/snort/snort.conf -i lo &
# capture to pcap
sudo tcpdump -i lo -nn -w loopback_capture.pcap &
# generate traffic between aliases
ping -I 127.0.0.2 -c 4 127.0.0.3
# start simple HTTP server bound to alias (in background)
python3 -m http.server 8080 --bind 127.0.0.3 &
# request from attacker alias
curl --interface 127.0.0.2 http://127.0.0.3:8080/
# stop captures/processes when done
sudo pkill tcpdump
sudo pkill snort
